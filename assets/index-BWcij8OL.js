import{a as ae,r,t as se,m as W,c as x,g as le,b as re,d as ie,u as f,e as oe,f as ce,i as de,k as me,I as F,_ as X,l as J,j as l,S as L,p as pe,n as ue,F as D,T as be}from"./index-TIGid5ut.js";import{$ as ge,A as he}from"./api-BiByZXLc.js";import{a as K}from"./row-3noq2tsD.js";import{A as ve}from"./index-FWUVPgfC.js";import{L as R}from"./index-Bjc2w_wg.js";import{S as fe,F as je,R as M}from"./Table-Bp-8TNHX.js";import{S as xe,D as ye}from"./SearchInput-DLs35Iv5.js";import"./Dropdown-Bat2p_zx.js";import"./Pagination-CNJdC_0o.js";const Oe={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},A=ae.createContext({});var $e=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]]);return a};const we=e=>se(e).map(t=>Object.assign(Object.assign({},t==null?void 0:t.props),{key:t.key}));function Se(e,t,a){const n=r.useMemo(()=>t||we(a),[t,a]);return r.useMemo(()=>n.map(c=>{var{span:i}=c,g=$e(c,["span"]);return i==="filled"?Object.assign(Object.assign({},g),{filled:!0}):Object.assign(Object.assign({},g),{span:typeof i=="number"?i:W(e,i)})}),[n,e])}var Ce=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]]);return a};function Ee(e,t){let a=[],n=[],s=!1,c=0;return e.filter(i=>i).forEach(i=>{const{filled:g}=i,u=Ce(i,["filled"]);if(g){n.push(u),a.push(n),n=[],c=0;return}const o=t-c;c+=i.span||1,c>=t?(c>t?(s=!0,n.push(Object.assign(Object.assign({},u),{span:o}))):n.push(u),a.push(n),n=[],c=0):n.push(u)}),n.length>0&&a.push(n),a=a.map(i=>{const g=i.reduce((u,o)=>u+(o.span||1),0);if(g<t){const u=i[i.length-1];return u.span=t-(g-(u.span||1)),i}return i}),[a,s]}const Ie=(e,t)=>{const[a,n]=r.useMemo(()=>Ee(t,e),[t,e]);return a},ze=({children:e})=>e;function G(e){return e!=null}const P=e=>{const{itemPrefixCls:t,component:a,span:n,className:s,style:c,labelStyle:i,contentStyle:g,bordered:u,label:o,content:p,colon:C,type:y,styles:b}=e,O=a,d=r.useContext(A),{classNames:h}=d;return u?r.createElement(O,{className:x({[`${t}-item-label`]:y==="label",[`${t}-item-content`]:y==="content",[`${h==null?void 0:h.label}`]:y==="label",[`${h==null?void 0:h.content}`]:y==="content"},s),style:c,colSpan:n},G(o)&&r.createElement("span",{style:Object.assign(Object.assign({},i),b==null?void 0:b.label)},o),G(p)&&r.createElement("span",{style:Object.assign(Object.assign({},i),b==null?void 0:b.content)},p)):r.createElement(O,{className:x(`${t}-item`,s),style:c,colSpan:n},r.createElement("div",{className:`${t}-item-container`},(o||o===0)&&r.createElement("span",{className:x(`${t}-item-label`,h==null?void 0:h.label,{[`${t}-item-no-colon`]:!C}),style:Object.assign(Object.assign({},i),b==null?void 0:b.label)},o),(p||p===0)&&r.createElement("span",{className:x(`${t}-item-content`,h==null?void 0:h.content),style:Object.assign(Object.assign({},g),b==null?void 0:b.content)},p)))};function T(e,{colon:t,prefixCls:a,bordered:n},{component:s,type:c,showLabel:i,showContent:g,labelStyle:u,contentStyle:o,styles:p}){return e.map(({label:C,children:y,prefixCls:b=a,className:O,style:d,labelStyle:h,contentStyle:m,span:N=1,key:E,styles:v},I)=>typeof s=="string"?r.createElement(P,{key:`${c}-${E||I}`,className:O,style:d,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},u),p==null?void 0:p.label),h),v==null?void 0:v.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},o),p==null?void 0:p.content),m),v==null?void 0:v.content)},span:N,colon:t,component:s,itemPrefixCls:b,bordered:n,label:i?C:null,content:g?y:null,type:c}):[r.createElement(P,{key:`label-${E||I}`,className:O,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u),p==null?void 0:p.label),d),h),v==null?void 0:v.label),span:1,colon:t,component:s[0],itemPrefixCls:b,bordered:n,label:C,type:"label"}),r.createElement(P,{key:`content-${E||I}`,className:O,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),p==null?void 0:p.content),d),m),v==null?void 0:v.content),span:N*2-1,component:s[1],itemPrefixCls:b,bordered:n,content:y,type:"content"})])}const Ne=e=>{const t=r.useContext(A),{prefixCls:a,vertical:n,row:s,index:c,bordered:i}=e;return n?r.createElement(r.Fragment,null,r.createElement("tr",{key:`label-${c}`,className:`${a}-row`},T(s,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),r.createElement("tr",{key:`content-${c}`,className:`${a}-row`},T(s,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):r.createElement("tr",{key:c,className:`${a}-row`},T(s,e,Object.assign({component:i?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},He=e=>{const{componentCls:t,labelBg:a}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${f(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${f(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${f(e.padding)} ${f(e.paddingLG)}`,borderInlineEnd:`${f(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:a,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${f(e.paddingSM)} ${f(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${f(e.paddingXS)} ${f(e.padding)}`}}}}}},Ve=e=>{const{componentCls:t,extraColor:a,itemPaddingBottom:n,itemPaddingEnd:s,colonMarginRight:c,colonMarginLeft:i,titleMarginBottom:g}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ie(e)),He(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:g},[`${t}-title`]:Object.assign(Object.assign({},oe),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:a,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n,paddingInlineEnd:s},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${f(i)} ${f(c)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Be=e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}),Le=le("Descriptions",e=>{const t=re(e,{});return Ve(t)},Be);var Me=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]]);return a};const $=e=>{const{prefixCls:t,title:a,extra:n,column:s,colon:c=!0,bordered:i,layout:g,children:u,className:o,rootClassName:p,style:C,size:y,labelStyle:b,contentStyle:O,styles:d,items:h,classNames:m}=e,N=Me(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:E,direction:v,className:I,style:q,classNames:w,styles:S}=ce("descriptions"),j=E("descriptions",t),V=de(),Q=r.useMemo(()=>{var z;return typeof s=="number"?s:(z=W(V,Object.assign(Object.assign({},Oe),s)))!==null&&z!==void 0?z:3},[V,s]),Y=Se(V,h,u),B=me(y),Z=Ie(Q,Y),[k,ee,te]=Le(j),ne=r.useMemo(()=>({labelStyle:b,contentStyle:O,styles:{content:Object.assign(Object.assign({},S.content),d==null?void 0:d.content),label:Object.assign(Object.assign({},S.label),d==null?void 0:d.label)},classNames:{label:x(w.label,m==null?void 0:m.label),content:x(w.content,m==null?void 0:m.content)}}),[b,O,d,m,w,S]);return k(r.createElement(A.Provider,{value:ne},r.createElement("div",Object.assign({className:x(j,I,w.root,m==null?void 0:m.root,{[`${j}-${B}`]:B&&B!=="default",[`${j}-bordered`]:!!i,[`${j}-rtl`]:v==="rtl"},o,p,ee,te),style:Object.assign(Object.assign(Object.assign(Object.assign({},q),S.root),d==null?void 0:d.root),C)},N),(a||n)&&r.createElement("div",{className:x(`${j}-header`,w.header,m==null?void 0:m.header),style:Object.assign(Object.assign({},S.header),d==null?void 0:d.header)},a&&r.createElement("div",{className:x(`${j}-title`,w.title,m==null?void 0:m.title),style:Object.assign(Object.assign({},S.title),d==null?void 0:d.title)},a),n&&r.createElement("div",{className:x(`${j}-extra`,w.extra,m==null?void 0:m.extra),style:Object.assign(Object.assign({},S.extra),d==null?void 0:d.extra)},n)),r.createElement("div",{className:`${j}-view`},r.createElement("table",null,r.createElement("tbody",null,Z.map((z,U)=>r.createElement(Ne,{key:U,index:U,colon:c,prefixCls:j,vertical:g==="vertical",bordered:i,row:z}))))))))};$.Item=ze;var Pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},Te=function(t,a){return r.createElement(F,X({},t,{ref:a,icon:Pe}))},Re=r.forwardRef(Te),_e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Ae=function(t,a){return r.createElement(F,X({},t,{ref:a,icon:_e}))},Ue=r.forwardRef(Ae);const H=J(e=>({users:[],isLoading:!1,error:null,fetchUsers:async()=>{e({isLoading:!0,error:null});try{const t=await ge.get("/users");e({users:t.data,isLoading:!1})}catch{e({error:"Ошибка загрузки пользователей",isLoading:!1})}}})),De=r.memo(({user:e})=>l.jsx(K,{title:l.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[l.jsx(ve,{children:e.name[0]}),l.jsx("span",{children:e.name})]}),hoverable:!0,children:l.jsxs($,{column:1,size:"small",children:[l.jsx($.Item,{label:"Логин",children:e.username}),l.jsx($.Item,{label:"Почта",children:l.jsx("a",{href:`mailto:${e.email}`,children:e.email})}),l.jsx($.Item,{label:"Телефон",children:l.jsx("a",{href:`tel:${e.phone}`,children:e.phone})}),l.jsx($.Item,{label:"Сайт",children:l.jsx("a",{href:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",children:e.website})}),l.jsx($.Item,{label:"Адрес",children:`${e.address.street}, ${e.address.suite}, ${e.address.city}, ${e.address.zipcode}`}),l.jsx($.Item,{label:"Компания",children:e.company.name})]})})),Ge=()=>l.jsx(R.Item,{children:l.jsx(K,{title:l.jsxs(fe,{children:[l.jsx(L.Avatar,{active:!0}),l.jsx(L.Input,{active:!0})]}),children:l.jsx(L,{paragraph:{rows:5},title:!1,active:!0})})}),We=({filteredUsers:e,isLoading:t})=>{const a=new Array(9).fill(0);return l.jsx(R,{grid:{gutter:16,xs:1,md:2,lg:2,xl:3,xxl:4},dataSource:t?a:e,renderItem:(n,s)=>l.jsx(R.Item,{children:t?l.jsx(Ge,{}):l.jsx(De,{user:n})},t?s:n.id)})},Fe=[{title:"Имя",dataIndex:"name",key:"name"},{title:"Логин",dataIndex:"username",key:"username"},{title:"Email",dataIndex:"email",key:"email"},{title:"Телефон",dataIndex:"phone",key:"phone"},{title:"Сайт",dataIndex:"website",key:"website",render:e=>l.jsx("a",{href:`http://${e}`,target:"_blank",rel:"noopener noreferrer",children:e})},{title:"Город",key:"city",render:(e,t)=>t.address.city},{title:"Компания",key:"company",render:(e,t)=>t.company.name}],Xe=({isLoading:e,users:t})=>l.jsx(je,{dataSource:t,columns:Fe,rowKey:"id",loading:e,pagination:{pageSize:5},scroll:{x:!0}}),_=J()(pe(e=>({view:"cards",setView:t=>e({view:t})}),{name:"view-users",storage:ue(()=>sessionStorage)})),Je=r.memo(()=>{const e=_(a=>a.view),t=_(a=>a.setView);return l.jsxs(M.Group,{value:e,onChange:a=>t(a.target.value),children:[l.jsx(M.Button,{value:"cards",title:"Карточки",children:l.jsx(Re,{})}),l.jsx(M.Button,{value:"table",title:"Таблица",children:l.jsx(Ue,{})})]})}),{Title:Ke,Text:qe}=be,lt=()=>{const e=H(o=>o.users),t=H(o=>o.isLoading),a=H(o=>o.error),n=H(o=>o.fetchUsers),s=_(o=>o.view),[c,i]=r.useState(""),g=o=>i(o.target.value),u=e.filter(o=>o.name.toLowerCase().includes(c.toLowerCase()));return r.useEffect(()=>{n()},[n]),l.jsxs(D,{vertical:!0,gap:16,children:[l.jsx(Ke,{level:2,style:{marginBottom:0},children:"Пользователи"}),l.jsx(xe,{value:c,onChange:g,placeholder:"Поиск по имени"}),l.jsx(ye,{style:{margin:0}}),l.jsxs(D,{gap:16,align:"center",justify:"flex-end",children:[l.jsx(qe,{strong:!0,children:"Вид отображения:"}),l.jsx(Je,{})]}),a&&l.jsx(he,{type:"error",message:a}),s==="cards"?l.jsx(We,{filteredUsers:u,isLoading:t}):l.jsx(Xe,{users:u,isLoading:t})]})};export{lt as Component};
