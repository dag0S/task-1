import{r as l,C as F,J as G,c as M,g as ce,b as me,d as ue,u as K,aB as de,t as V,aq as pe,l as fe,j as s,F as w,S as m,aC as ge,aD as be,L as ye,h as je,R as he,T as xe}from"./index-C83_LZpR.js";import{$ as X,A as ve}from"./api-BAmjOXa4.js";import{a as h}from"./row-Blp5HksO.js";import{L as x}from"./index-DbW2OvfC.js";import{A as Q}from"./index-CA3rwFKP.js";import{D as Oe,R as Ce}from"./Pagination-DSF5U-_P.js";import"./Dropdown-Bf-0tVwQ.js";const T=({children:e})=>{const{getPrefixCls:r}=l.useContext(F),a=r("breadcrumb");return l.createElement("li",{className:`${a}-separator`,"aria-hidden":"true"},e===""?e:e||"/")};T.__ANT_BREADCRUMB_SEPARATOR=!0;var Se=function(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]]);return a};function Ie(e,r){if(e.title===void 0||e.title===null)return null;const a=Object.keys(r).join("|");return typeof e.title=="object"?e.title:String(e.title).replace(new RegExp(`:(${a})`,"g"),(t,n)=>r[n]||t)}function Y(e,r,a,t){if(a==null)return null;const{className:n,onClick:i}=r,c=Se(r,["className","onClick"]),o=Object.assign(Object.assign({},G(c,{data:!0,aria:!0})),{onClick:i});return t!==void 0?l.createElement("a",Object.assign({},o,{className:M(`${e}-link`,n),href:t}),a):l.createElement("span",Object.assign({},o,{className:M(`${e}-link`,n)}),a)}function Pe(e,r){return(t,n,i,c,o)=>{if(r)return r(t,n,i,c);const g=Ie(t,n);return Y(e,t,g,o)}}var H=function(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]]);return a};const Z=e=>{const{prefixCls:r,separator:a="/",children:t,menu:n,overlay:i,dropdownProps:c,href:o}=e,v=(O=>{if(n||i){const C=Object.assign({},c);if(n){const R=n||{},{items:S}=R,u=H(R,["items"]);C.menu=Object.assign(Object.assign({},u),{items:S==null?void 0:S.map((b,d)=>{var{key:I,title:_,label:P,path:p}=b,B=H(b,["key","title","label","path"]);let $=P??_;return p&&($=l.createElement("a",{href:`${o}${p}`},$)),Object.assign(Object.assign({},B),{key:I??d,label:$})})})}else i&&(C.overlay=i);return l.createElement(Oe,Object.assign({placement:"bottom"},C),l.createElement("span",{className:`${r}-overlay-link`},O,l.createElement(Ce,null)))}return O})(t);return v!=null?l.createElement(l.Fragment,null,l.createElement("li",null,v),a&&l.createElement(T,null,a)):null},ee=e=>{const{prefixCls:r,children:a,href:t}=e,n=H(e,["prefixCls","children","href"]),{getPrefixCls:i}=l.useContext(F),c=i("breadcrumb",r);return l.createElement(Z,Object.assign({},n,{prefixCls:c}),Y(c,n,a,t))};ee.__ANT_BREADCRUMB_ITEM=!0;const $e=e=>{const{componentCls:r,iconCls:a,calc:t}=e;return{[r]:Object.assign(Object.assign({},ue(e)),{color:e.itemColor,fontSize:e.fontSize,[a]:{fontSize:e.iconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:Object.assign({color:e.linkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${K(e.paddingXXS)}`,borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",marginInline:t(e.marginXXS).mul(-1).equal(),"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover}},de(e)),"li:last-child":{color:e.lastItemColor},[`${r}-separator`]:{marginInline:e.separatorMargin,color:e.separatorColor},[`${r}-link`]:{[`
          > ${a} + span,
          > ${a} + a
        `]:{marginInlineStart:e.marginXXS}},[`${r}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.fontHeight,display:"inline-block",padding:`0 ${K(e.paddingXXS)}`,marginInline:t(e.marginXXS).mul(-1).equal(),[`> ${a}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.linkHoverColor,backgroundColor:e.colorBgTextHover,a:{color:e.linkHoverColor}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},Ee=e=>({itemColor:e.colorTextDescription,lastItemColor:e.colorText,iconFontSize:e.fontSize,linkColor:e.colorTextDescription,linkHoverColor:e.colorText,separatorColor:e.colorTextDescription,separatorMargin:e.marginXS}),Re=ce("Breadcrumb",e=>{const r=me(e,{});return $e(r)},Ee);var J=function(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]]);return a};function Ne(e){const{breadcrumbName:r,children:a}=e,t=J(e,["breadcrumbName","children"]),n=Object.assign({title:r},t);return a&&(n.menu={items:a.map(i=>{var{breadcrumbName:c}=i,o=J(i,["breadcrumbName"]);return Object.assign(Object.assign({},o),{title:c})})}),n}function we(e,r){return l.useMemo(()=>e||(r?r.map(Ne):null),[e,r])}var Te=function(e,r){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)r.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]]);return a};const _e=(e,r)=>{if(r===void 0)return r;let a=(r||"").replace(/^\//,"");return Object.keys(e).forEach(t=>{a=a.replace(`:${t}`,e[t])}),a},k=e=>{const{prefixCls:r,separator:a="/",style:t,className:n,rootClassName:i,routes:c,items:o,children:g,itemRender:v,params:O={}}=e,C=Te(e,["prefixCls","separator","style","className","rootClassName","routes","items","children","itemRender","params"]),{getPrefixCls:R,direction:S,breadcrumb:u}=l.useContext(F);let b;const d=R("breadcrumb",r),[I,_,P]=Re(d),p=we(o,c),B=Pe(d,v);if(p&&p.length>0){const y=[],E=o||c;b=p.map((f,N)=>{const{path:re,key:L,type:ae,menu:q,overlay:U,onClick:ne,className:se,separator:oe,dropdownProps:le}=f,D=_e(O,re);D!==void 0&&y.push(D);const W=L??N;if(ae==="separator")return l.createElement(T,{key:W},oe);const z={},ie=N===p.length-1;q?z.menu=q:U&&(z.overlay=U);let{href:A}=f;return y.length&&D!==void 0&&(A=`#/${y.join("/")}`),l.createElement(Z,Object.assign({key:W},z,G(f,{data:!0,aria:!0}),{className:se,dropdownProps:le,href:A,separator:ie?"":a,onClick:ne,prefixCls:d}),B(f,O,E,y,A))})}else if(g){const y=V(g).length;b=V(g).map((E,f)=>{if(!E)return E;const N=f===y-1;return pe(E,{separator:N?"":a,key:f})})}const $=M(d,u==null?void 0:u.className,{[`${d}-rtl`]:S==="rtl"},n,i,_,P),te=Object.assign(Object.assign({},u==null?void 0:u.style),t);return I(l.createElement("nav",Object.assign({className:$,style:te},C),l.createElement("ol",null,b)))};k.Item=ee;k.Separator=T;const j=fe(e=>({post:null,author:null,comments:[],isLoading:!1,error:null,fetchPostDetails:async r=>{e({isLoading:!0,error:null});try{const t=(await X.get(`/posts/${r}`)).data,[n,i]=await Promise.all([X.get(`/users/${t.userId}`),X.get(`/posts/${r}/comments`)]),c=n.data,o=i.data;e({post:t,author:c,comments:o,isLoading:!1})}catch{e({error:"Ошибка загрузки данных",isLoading:!1})}}})),Be=()=>{const e=new Array(5).fill(0);return s.jsxs(w,{vertical:!0,gap:16,style:{maxWidth:600,margin:"0 auto"},children:[s.jsx(m.Input,{active:!0,size:"small",style:{width:200}}),s.jsx(h,{children:s.jsxs(w,{gap:16,children:[s.jsx(m.Avatar,{active:!0}),s.jsxs("div",{children:[s.jsx(m.Input,{active:!0,style:{marginBottom:16}}),s.jsx("br",{}),s.jsx(m.Input,{active:!0,size:"small"})]})]})}),s.jsx(h,{title:s.jsx(m.Input,{active:!0}),children:s.jsx(m,{active:!0,paragraph:{rows:4},title:!1})}),s.jsx(h,{title:"Комментарии",children:s.jsx(x,{itemLayout:"horizontal",dataSource:e,renderItem:()=>s.jsx(x.Item,{children:s.jsx(x.Item.Meta,{avatar:s.jsx(m.Avatar,{active:!0}),title:s.jsx(m.Input,{active:!0,size:"small"}),description:s.jsx(m,{active:!0,title:!1})})})})})]})},Le=({comments:e})=>s.jsx(x,{itemLayout:"horizontal",dataSource:e,renderItem:r=>s.jsx(x.Item,{children:s.jsx(x.Item.Meta,{avatar:s.jsx(Q,{icon:s.jsx(ge,{})}),title:s.jsx("a",{href:`mailto:${r.email}`,target:"_blank",children:r.email}),description:r.body})})}),{Title:De,Text:ze}=xe,Ue=()=>{const{postId:e}=be(),r=j(o=>o.post),a=j(o=>o.author),t=j(o=>o.comments),n=j(o=>o.isLoading),i=j(o=>o.error),c=j(o=>o.fetchPostDetails);return l.useEffect(()=>{e&&c(e)},[e,c]),n?s.jsx(Be,{}):i?s.jsx(ve,{type:"error",message:i}):!r||!a?null:s.jsxs(w,{vertical:!0,gap:16,style:{maxWidth:600,margin:"0 auto"},children:[s.jsx(k,{items:[{title:s.jsx(ye,{to:je(he.POSTS),children:"Посты"})},{title:":postTitle"}],params:{postTitle:r.title}}),s.jsx(h,{children:s.jsxs(w,{gap:16,children:[s.jsx(Q,{children:a.name[0]}),s.jsxs("div",{children:[s.jsxs(De,{level:3,style:{marginBottom:0},children:[a.name," (",a.username,")"]}),s.jsx(ze,{type:"secondary",children:"Почта: "}),s.jsx("a",{href:`mailto:${a.email}`,target:"_blank",children:a.email})]})]})}),s.jsx(h,{title:r.title,children:r.body}),s.jsx(h,{title:"Комментарии",children:s.jsx(Le,{comments:t})})]})};export{Ue as Component};
