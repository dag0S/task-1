import{a as ne,r as s,t as ae,m as W,c as x,g as le,b as se,d as re,u as f,e as ie,f as oe,i as ce,k as de,I as F,_ as D,l as X,j as r,S as L,p as me,n as pe,F as ue,T as be}from"./index-BXSuF2sc.js";import{$ as ge,A as he}from"./api-C733Tm3L.js";import{a as J}from"./row-CySMsWhY.js";import{A as ve}from"./index-BpSlZnIh.js";import{L as T}from"./index-COA1WBaf.js";import{S as fe,F as je,R as M}from"./Table-C1vIqEOE.js";import{S as xe}from"./SearchInput-B5zDe_-G.js";import"./Dropdown-Bd_vXrCR.js";import"./Pagination-CM39x7tk.js";const ye={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1},A=ne.createContext({});var Oe=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};const $e=e=>ae(e).map(t=>Object.assign(Object.assign({},t==null?void 0:t.props),{key:t.key}));function we(e,t,a){const n=s.useMemo(()=>t||$e(a),[t,a]);return s.useMemo(()=>n.map(c=>{var{span:i}=c,g=Oe(c,["span"]);return i==="filled"?Object.assign(Object.assign({},g),{filled:!0}):Object.assign(Object.assign({},g),{span:typeof i=="number"?i:W(e,i)})}),[n,e])}var Se=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};function Ce(e,t){let a=[],n=[],l=!1,c=0;return e.filter(i=>i).forEach(i=>{const{filled:g}=i,u=Se(i,["filled"]);if(g){n.push(u),a.push(n),n=[],c=0;return}const o=t-c;c+=i.span||1,c>=t?(c>t?(l=!0,n.push(Object.assign(Object.assign({},u),{span:o}))):n.push(u),a.push(n),n=[],c=0):n.push(u)}),n.length>0&&a.push(n),a=a.map(i=>{const g=i.reduce((u,o)=>u+(o.span||1),0);if(g<t){const u=i[i.length-1];return u.span=t-(g-(u.span||1)),i}return i}),[a,l]}const Ee=(e,t)=>{const[a,n]=s.useMemo(()=>Ce(t,e),[t,e]);return a},Ie=({children:e})=>e;function G(e){return e!=null}const P=e=>{const{itemPrefixCls:t,component:a,span:n,className:l,style:c,labelStyle:i,contentStyle:g,bordered:u,label:o,content:p,colon:C,type:y,styles:b}=e,O=a,d=s.useContext(A),{classNames:h}=d;return u?s.createElement(O,{className:x({[`${t}-item-label`]:y==="label",[`${t}-item-content`]:y==="content",[`${h==null?void 0:h.label}`]:y==="label",[`${h==null?void 0:h.content}`]:y==="content"},l),style:c,colSpan:n},G(o)&&s.createElement("span",{style:Object.assign(Object.assign({},i),b==null?void 0:b.label)},o),G(p)&&s.createElement("span",{style:Object.assign(Object.assign({},i),b==null?void 0:b.content)},p)):s.createElement(O,{className:x(`${t}-item`,l),style:c,colSpan:n},s.createElement("div",{className:`${t}-item-container`},(o||o===0)&&s.createElement("span",{className:x(`${t}-item-label`,h==null?void 0:h.label,{[`${t}-item-no-colon`]:!C}),style:Object.assign(Object.assign({},i),b==null?void 0:b.label)},o),(p||p===0)&&s.createElement("span",{className:x(`${t}-item-content`,h==null?void 0:h.content),style:Object.assign(Object.assign({},g),b==null?void 0:b.content)},p)))};function R(e,{colon:t,prefixCls:a,bordered:n},{component:l,type:c,showLabel:i,showContent:g,labelStyle:u,contentStyle:o,styles:p}){return e.map(({label:C,children:y,prefixCls:b=a,className:O,style:d,labelStyle:h,contentStyle:m,span:N=1,key:E,styles:v},I)=>typeof l=="string"?s.createElement(P,{key:`${c}-${E||I}`,className:O,style:d,styles:{label:Object.assign(Object.assign(Object.assign(Object.assign({},u),p==null?void 0:p.label),h),v==null?void 0:v.label),content:Object.assign(Object.assign(Object.assign(Object.assign({},o),p==null?void 0:p.content),m),v==null?void 0:v.content)},span:N,colon:t,component:l,itemPrefixCls:b,bordered:n,label:i?C:null,content:g?y:null,type:c}):[s.createElement(P,{key:`label-${E||I}`,className:O,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u),p==null?void 0:p.label),d),h),v==null?void 0:v.label),span:1,colon:t,component:l[0],itemPrefixCls:b,bordered:n,label:C,type:"label"}),s.createElement(P,{key:`content-${E||I}`,className:O,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),p==null?void 0:p.content),d),m),v==null?void 0:v.content),span:N*2-1,component:l[1],itemPrefixCls:b,bordered:n,content:y,type:"content"})])}const ze=e=>{const t=s.useContext(A),{prefixCls:a,vertical:n,row:l,index:c,bordered:i}=e;return n?s.createElement(s.Fragment,null,s.createElement("tr",{key:`label-${c}`,className:`${a}-row`},R(l,e,Object.assign({component:"th",type:"label",showLabel:!0},t))),s.createElement("tr",{key:`content-${c}`,className:`${a}-row`},R(l,e,Object.assign({component:"td",type:"content",showContent:!0},t)))):s.createElement("tr",{key:c,className:`${a}-row`},R(l,e,Object.assign({component:i?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},t)))},Ne=e=>{const{componentCls:t,labelBg:a}=e;return{[`&${t}-bordered`]:{[`> ${t}-view`]:{border:`${f(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"> table":{tableLayout:"auto"},[`${t}-row`]:{borderBottom:`${f(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:first-child":{"> th:first-child, > td:first-child":{borderStartStartRadius:e.borderRadiusLG}},"&:last-child":{borderBottom:"none","> th:first-child, > td:first-child":{borderEndStartRadius:e.borderRadiusLG}},[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${f(e.padding)} ${f(e.paddingLG)}`,borderInlineEnd:`${f(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderInlineEnd:"none"}},[`> ${t}-item-label`]:{color:e.colorTextSecondary,backgroundColor:a,"&::after":{display:"none"}}}},[`&${t}-middle`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${f(e.paddingSM)} ${f(e.paddingLG)}`}}},[`&${t}-small`]:{[`${t}-row`]:{[`> ${t}-item-label, > ${t}-item-content`]:{padding:`${f(e.paddingXS)} ${f(e.padding)}`}}}}}},He=e=>{const{componentCls:t,extraColor:a,itemPaddingBottom:n,itemPaddingEnd:l,colonMarginRight:c,colonMarginLeft:i,titleMarginBottom:g}=e;return{[t]:Object.assign(Object.assign(Object.assign({},re(e)),Ne(e)),{"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",alignItems:"center",marginBottom:g},[`${t}-title`]:Object.assign(Object.assign({},ie),{flex:"auto",color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}),[`${t}-extra`]:{marginInlineStart:"auto",color:a,fontSize:e.fontSize},[`${t}-view`]:{width:"100%",borderRadius:e.borderRadiusLG,table:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse"}},[`${t}-row`]:{"> th, > td":{paddingBottom:n,paddingInlineEnd:l},"> th:last-child, > td:last-child":{paddingInlineEnd:0},"&:last-child":{borderBottom:"none","> th, > td":{paddingBottom:0}}},[`${t}-item-label`]:{color:e.labelColor,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"start","&::after":{content:'":"',position:"relative",top:-.5,marginInline:`${f(i)} ${f(c)}`},[`&${t}-item-no-colon::after`]:{content:'""'}},[`${t}-item-no-label`]:{"&::after":{margin:0,content:'""'}},[`${t}-item-content`]:{display:"table-cell",flex:1,color:e.contentColor,fontSize:e.fontSize,lineHeight:e.lineHeight,wordBreak:"break-word",overflowWrap:"break-word"},[`${t}-item`]:{paddingBottom:0,verticalAlign:"top","&-container":{display:"flex",[`${t}-item-label`]:{display:"inline-flex",alignItems:"baseline"},[`${t}-item-content`]:{display:"inline-flex",alignItems:"baseline",minWidth:"1em"}}},"&-middle":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingSM}}},"&-small":{[`${t}-row`]:{"> th, > td":{paddingBottom:e.paddingXS}}}})}},Ve=e=>({labelBg:e.colorFillAlter,labelColor:e.colorTextTertiary,titleColor:e.colorText,titleMarginBottom:e.fontSizeSM*e.lineHeightSM,itemPaddingBottom:e.padding,itemPaddingEnd:e.padding,colonMarginRight:e.marginXS,colonMarginLeft:e.marginXXS/2,contentColor:e.colorText,extraColor:e.colorText}),Be=le("Descriptions",e=>{const t=se(e,{});return He(t)},Ve);var Le=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};const $=e=>{const{prefixCls:t,title:a,extra:n,column:l,colon:c=!0,bordered:i,layout:g,children:u,className:o,rootClassName:p,style:C,size:y,labelStyle:b,contentStyle:O,styles:d,items:h,classNames:m}=e,N=Le(e,["prefixCls","title","extra","column","colon","bordered","layout","children","className","rootClassName","style","size","labelStyle","contentStyle","styles","items","classNames"]),{getPrefixCls:E,direction:v,className:I,style:K,classNames:w,styles:S}=oe("descriptions"),j=E("descriptions",t),V=ce(),q=s.useMemo(()=>{var z;return typeof l=="number"?l:(z=W(V,Object.assign(Object.assign({},ye),l)))!==null&&z!==void 0?z:3},[V,l]),Q=we(V,h,u),B=de(y),Y=Ee(q,Q),[Z,k,ee]=Be(j),te=s.useMemo(()=>({labelStyle:b,contentStyle:O,styles:{content:Object.assign(Object.assign({},S.content),d==null?void 0:d.content),label:Object.assign(Object.assign({},S.label),d==null?void 0:d.label)},classNames:{label:x(w.label,m==null?void 0:m.label),content:x(w.content,m==null?void 0:m.content)}}),[b,O,d,m,w,S]);return Z(s.createElement(A.Provider,{value:te},s.createElement("div",Object.assign({className:x(j,I,w.root,m==null?void 0:m.root,{[`${j}-${B}`]:B&&B!=="default",[`${j}-bordered`]:!!i,[`${j}-rtl`]:v==="rtl"},o,p,k,ee),style:Object.assign(Object.assign(Object.assign(Object.assign({},K),S.root),d==null?void 0:d.root),C)},N),(a||n)&&s.createElement("div",{className:x(`${j}-header`,w.header,m==null?void 0:m.header),style:Object.assign(Object.assign({},S.header),d==null?void 0:d.header)},a&&s.createElement("div",{className:x(`${j}-title`,w.title,m==null?void 0:m.title),style:Object.assign(Object.assign({},S.title),d==null?void 0:d.title)},a),n&&s.createElement("div",{className:x(`${j}-extra`,w.extra,m==null?void 0:m.extra),style:Object.assign(Object.assign({},S.extra),d==null?void 0:d.extra)},n)),s.createElement("div",{className:`${j}-view`},s.createElement("table",null,s.createElement("tbody",null,Y.map((z,U)=>s.createElement(ze,{key:U,index:U,colon:c,prefixCls:j,vertical:g==="vertical",bordered:i,row:z}))))))))};$.Item=Ie;var Me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"},Pe=function(t,a){return s.createElement(F,D({},t,{ref:a,icon:Me}))},Re=s.forwardRef(Pe),Te={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},_e=function(t,a){return s.createElement(F,D({},t,{ref:a,icon:Te}))},Ae=s.forwardRef(_e);const H=X(e=>({users:[],isLoading:!1,error:null,fetchUsers:async()=>{e({isLoading:!0,error:null});try{const t=await ge.get("/users");e({users:t.data,isLoading:!1})}catch{e({error:"Ошибка загрузки пользователей",isLoading:!1})}}})),Ue=s.memo(({user:e})=>r.jsx(J,{title:r.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[r.jsx(ve,{children:e.name[0]}),r.jsx("span",{children:e.name})]}),hoverable:!0,children:r.jsxs($,{column:1,size:"small",children:[r.jsx($.Item,{label:"Логин",children:e.username}),r.jsx($.Item,{label:"Почта",children:r.jsx("a",{href:`mailto:${e.email}`,children:e.email})}),r.jsx($.Item,{label:"Телефон",children:r.jsx("a",{href:`tel:${e.phone}`,children:e.phone})}),r.jsx($.Item,{label:"Сайт",children:r.jsx("a",{href:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",children:e.website})}),r.jsx($.Item,{label:"Адрес",children:`${e.address.street}, ${e.address.suite}, ${e.address.city}, ${e.address.zipcode}`}),r.jsx($.Item,{label:"Компания",children:e.company.name})]})})),Ge=()=>r.jsx(T.Item,{children:r.jsx(J,{title:r.jsxs(fe,{children:[r.jsx(L.Avatar,{active:!0}),r.jsx(L.Input,{active:!0})]}),children:r.jsx(L,{paragraph:{rows:5},title:!1,active:!0})})}),We=({filteredUsers:e,isLoading:t})=>{const a=new Array(9).fill(0);return r.jsx(T,{grid:{gutter:16,xs:1,md:2,lg:2,xl:3,xxl:4},dataSource:t?a:e,renderItem:(n,l)=>r.jsx(T.Item,{children:t?r.jsx(Ge,{}):r.jsx(Ue,{user:n})},t?l:n.id)})},Fe=[{title:"Имя",dataIndex:"name",key:"name"},{title:"Логин",dataIndex:"username",key:"username"},{title:"Email",dataIndex:"email",key:"email"},{title:"Телефон",dataIndex:"phone",key:"phone"},{title:"Сайт",dataIndex:"website",key:"website",render:e=>r.jsx("a",{href:`http://${e}`,target:"_blank",rel:"noopener noreferrer",children:e})},{title:"Город",key:"city",render:(e,t)=>t.address.city},{title:"Компания",key:"company",render:(e,t)=>t.company.name}],De=({isLoading:e,users:t})=>r.jsx(je,{dataSource:t,columns:Fe,rowKey:"id",loading:e,pagination:{pageSize:5},scroll:{x:!0}}),_=X()(me(e=>({view:"cards",setView:t=>e({view:t})}),{name:"view-users",storage:pe(()=>sessionStorage)})),Xe=s.memo(()=>{const e=_(a=>a.view),t=_(a=>a.setView);return r.jsxs(M.Group,{value:e,onChange:a=>t(a.target.value),children:[r.jsx(M.Button,{value:"cards",title:"Карточки",children:r.jsx(Re,{})}),r.jsx(M.Button,{value:"table",title:"Таблица",children:r.jsx(Ae,{})})]})}),{Title:Je}=be,at=()=>{const e=H(o=>o.users),t=H(o=>o.isLoading),a=H(o=>o.error),n=H(o=>o.fetchUsers),l=_(o=>o.view),[c,i]=s.useState(""),g=o=>i(o.target.value),u=e.filter(o=>o.name.toLowerCase().includes(c.toLowerCase()));return s.useEffect(()=>{n()},[n]),r.jsxs(ue,{vertical:!0,gap:16,children:[r.jsx(Je,{level:2,style:{marginBottom:0},children:"Пользователи"}),r.jsx(xe,{value:c,onChange:g,placeholder:"Поиск по имени"}),r.jsx(Xe,{}),a&&r.jsx(he,{type:"error",message:a}),l==="cards"?r.jsx(We,{filteredUsers:u,isLoading:t}):r.jsx(De,{users:u,isLoading:t})]})};export{at as Component};
