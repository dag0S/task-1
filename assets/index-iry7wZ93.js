import{aF as zt,ao as ut,r,a as X,aM as At,y as M,c as Y,K as ze,J as dt,_ as G,v as Z,ag as qe,H as _t,bh as et,al as Re,bi as ft,g as mt,b2 as vt,u as B,b as Ye,d as jt,aB as Dt,O as gt,x as fe,a2 as Bt,w as Ht,q as xe,s as We,I as Me,az as be,e as Xt,b8 as Ve,b7 as Fe,aX as Yt,C as Wt,D as ht,a_ as pt,a$ as Ae,f as Vt,aN as Ft,l as Zt,j as _,T as Ct,F as wt}from"./index-BXSuF2sc.js";import{a as Se,R as Gt,S as Ut}from"./SearchInput-B5zDe_-G.js";import{u as kt}from"./useDebounce-CA6ewu6l.js";import{$ as Xe,A as qt,S as Kt}from"./api-C733Tm3L.js";import{g as Qt,a as Jt,R as en,C as tn}from"./row-CySMsWhY.js";import{A as nn}from"./index-BpSlZnIh.js";import"./Dropdown-Bd_vXrCR.js";const on=new ut("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),rn=new ut("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),bt=(e,t=!1)=>{const{antCls:n}=e,o=`${n}-fade`,a=t?"&":"";return[zt(o,on,rn,e.motionDurationMid,t),{[`
        ${a}${o}-enter,
        ${a}${o}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${a}${o}-leave`]:{animationTimingFunction:"linear"}}]};var St=r.createContext({});function tt(e,t,n){var o=t;return!o&&n&&(o="".concat(e,"-").concat(n)),o}function nt(e,t){var n=e["page".concat(t?"Y":"X","Offset")],o="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var a=e.document;n=a.documentElement[o],typeof n!="number"&&(n=a.body[o])}return n}function an(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},o=e.ownerDocument,a=o.defaultView||o.parentWindow;return n.left+=nt(a),n.top+=nt(a,!0),n}const sn=r.memo(function(e){var t=e.children;return t},function(e,t){var n=t.shouldUpdate;return!n});var ln={width:0,height:0,overflow:"hidden",outline:"none"},cn={outline:"none"},un=X.forwardRef(function(e,t){var n=e.prefixCls,o=e.className,a=e.style,i=e.title,l=e.ariaId,s=e.footer,c=e.closable,d=e.closeIcon,v=e.onClose,u=e.children,p=e.bodyStyle,f=e.bodyProps,g=e.modalRender,y=e.onMouseDown,x=e.onMouseUp,b=e.holderRef,$=e.visible,I=e.forceRender,R=e.width,m=e.height,w=e.classNames,h=e.styles,C=X.useContext(St),E=C.panel,N=At(b,E),S=r.useRef(),P=r.useRef();X.useImperativeHandle(t,function(){return{focus:function(){var j;(j=S.current)===null||j===void 0||j.focus({preventScroll:!0})},changeActive:function(j){var J=document,re=J.activeElement;j&&re===P.current?S.current.focus({preventScroll:!0}):!j&&re===S.current&&P.current.focus({preventScroll:!0})}}});var O={};R!==void 0&&(O.width=R),m!==void 0&&(O.height=m);var T=s?X.createElement("div",{className:Y("".concat(n,"-footer"),w==null?void 0:w.footer),style:M({},h==null?void 0:h.footer)},s):null,z=i?X.createElement("div",{className:Y("".concat(n,"-header"),w==null?void 0:w.header),style:M({},h==null?void 0:h.header)},X.createElement("div",{className:"".concat(n,"-title"),id:l},i)):null,H=r.useMemo(function(){return ze(c)==="object"&&c!==null?c:c?{closeIcon:d??X.createElement("span",{className:"".concat(n,"-close-x")})}:{}},[c,d,n]),W=dt(H,!0),U=ze(c)==="object"&&c.disabled,oe=c?X.createElement("button",G({type:"button",onClick:v,"aria-label":"Close"},W,{className:"".concat(n,"-close"),disabled:U}),H.closeIcon):null,V=X.createElement("div",{className:Y("".concat(n,"-content"),w==null?void 0:w.content),style:h==null?void 0:h.content},oe,z,X.createElement("div",G({className:Y("".concat(n,"-body"),w==null?void 0:w.body),style:M(M({},p),h==null?void 0:h.body)},f),u),T);return X.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":i?l:null,"aria-modal":"true",ref:N,style:M(M({},a),O),className:Y(n,o),onMouseDown:y,onMouseUp:x},X.createElement("div",{ref:S,tabIndex:0,style:cn},X.createElement(sn,{shouldUpdate:$||I},g?g(V):V)),X.createElement("div",{tabIndex:0,ref:P,style:ln}))}),yt=r.forwardRef(function(e,t){var n=e.prefixCls,o=e.title,a=e.style,i=e.className,l=e.visible,s=e.forceRender,c=e.destroyOnClose,d=e.motionName,v=e.ariaId,u=e.onVisibleChanged,p=e.mousePosition,f=r.useRef(),g=r.useState(),y=Z(g,2),x=y[0],b=y[1],$={};x&&($.transformOrigin=x);function I(){var R=an(f.current);b(p&&(p.x||p.y)?"".concat(p.x-R.left,"px ").concat(p.y-R.top,"px"):"")}return r.createElement(qe,{visible:l,onVisibleChanged:u,onAppearPrepare:I,onEnterPrepare:I,forceRender:s,motionName:d,removeOnLeave:c,ref:f},function(R,m){var w=R.className,h=R.style;return r.createElement(un,G({},e,{ref:t,title:o,ariaId:v,prefixCls:n,holderRef:m,style:M(M(M({},h),a),$),className:Y(i,w)}))})});yt.displayName="Content";var dn=function(t){var n=t.prefixCls,o=t.style,a=t.visible,i=t.maskProps,l=t.motionName,s=t.className;return r.createElement(qe,{key:"mask",visible:a,motionName:l,leavedClassName:"".concat(n,"-mask-hidden")},function(c,d){var v=c.className,u=c.style;return r.createElement("div",G({ref:d,style:M(M({},u),o),className:Y("".concat(n,"-mask"),v,s)},i))})},fn=function(t){var n=t.prefixCls,o=n===void 0?"rc-dialog":n,a=t.zIndex,i=t.visible,l=i===void 0?!1:i,s=t.keyboard,c=s===void 0?!0:s,d=t.focusTriggerAfterClose,v=d===void 0?!0:d,u=t.wrapStyle,p=t.wrapClassName,f=t.wrapProps,g=t.onClose,y=t.afterOpenChange,x=t.afterClose,b=t.transitionName,$=t.animation,I=t.closable,R=I===void 0?!0:I,m=t.mask,w=m===void 0?!0:m,h=t.maskTransitionName,C=t.maskAnimation,E=t.maskClosable,N=E===void 0?!0:E,S=t.maskStyle,P=t.maskProps,O=t.rootClassName,T=t.classNames,z=t.styles,H=r.useRef(),W=r.useRef(),U=r.useRef(),oe=r.useState(l),V=Z(oe,2),k=V[0],j=V[1],J=_t();function re(){et(W.current,document.activeElement)||(H.current=document.activeElement)}function se(){if(!et(W.current,document.activeElement)){var L;(L=U.current)===null||L===void 0||L.focus()}}function F(L){if(L)se();else{if(j(!1),w&&H.current&&v){try{H.current.focus({preventScroll:!0})}catch{}H.current=null}k&&(x==null||x())}y==null||y(L)}function le(L){g==null||g(L)}var ee=r.useRef(!1),te=r.useRef(),D=function(){clearTimeout(te.current),ee.current=!0},ce=function(){te.current=setTimeout(function(){ee.current=!1})},q=null;N&&(q=function(A){ee.current?ee.current=!1:W.current===A.target&&le(A)});function ae(L){if(c&&L.keyCode===Re.ESC){L.stopPropagation(),le(L);return}l&&L.keyCode===Re.TAB&&U.current.changeActive(!L.shiftKey)}r.useEffect(function(){l&&(j(!0),re())},[l]),r.useEffect(function(){return function(){clearTimeout(te.current)}},[]);var ue=M(M(M({zIndex:a},u),z==null?void 0:z.wrapper),{},{display:k?null:"none"});return r.createElement("div",G({className:Y("".concat(o,"-root"),O)},dt(t,{data:!0})),r.createElement(dn,{prefixCls:o,visible:w&&l,motionName:tt(o,h,C),style:M(M({zIndex:a},S),z==null?void 0:z.mask),maskProps:P,className:T==null?void 0:T.mask}),r.createElement("div",G({tabIndex:-1,onKeyDown:ae,className:Y("".concat(o,"-wrap"),p,T==null?void 0:T.wrapper),ref:W,onClick:q,style:ue},f),r.createElement(yt,G({},t,{onMouseDown:D,onMouseUp:ce,ref:U,closable:R,ariaId:J,prefixCls:o,visible:l&&k,onClose:le,onVisibleChanged:F,motionName:tt(o,b,$)}))))},xt=function(t){var n=t.visible,o=t.getContainer,a=t.forceRender,i=t.destroyOnClose,l=i===void 0?!1:i,s=t.afterClose,c=t.panelRef,d=r.useState(n),v=Z(d,2),u=v[0],p=v[1],f=r.useMemo(function(){return{panel:c}},[c]);return r.useEffect(function(){n&&p(!0)},[n]),!a&&l&&!u?null:r.createElement(St.Provider,{value:f},r.createElement(ft,{open:n||a||u,autoDestroy:!1,getContainer:o,autoLock:n||u},r.createElement(fn,G({},t,{destroyOnClose:l,afterClose:function(){s==null||s(),p(!1)}}))))};xt.displayName="Dialog";function ot(e){return{position:e,inset:0}}const It=e=>{const{componentCls:t,antCls:n}=e;return[{[`${t}-root`]:{[`${t}${n}-zoom-enter, ${t}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${n}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},ot("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},ot("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:bt(e)}]},mn=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${B(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},jt(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${B(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:B(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},Dt(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${B(e.borderRadiusLG)} ${B(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${B(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},vn=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},gn=e=>{const{componentCls:t}=e,n=Qt(e);delete n.xs;const o=Object.keys(n).map(a=>({[`@media (min-width: ${B(n[a])})`]:{width:`var(--${t.replace(".","")}-${a}-width)`}}));return{[`${t}-root`]:{[t]:[{width:`var(--${t.replace(".","")}-xs-width)`}].concat(gt(o))}}},hn=e=>{const t=e.padding,n=e.fontSizeHeading5,o=e.lineHeightHeading5;return Ye(e,{modalHeaderHeight:e.calc(e.calc(o).mul(n).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},pn=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${B(e.paddingMD)} ${B(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${B(e.padding)} ${B(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${B(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${B(e.paddingXS)} ${B(e.padding)}`:0,footerBorderTop:e.wireframe?`${B(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${B(e.borderRadiusLG)} ${B(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${B(e.padding*2)} ${B(e.padding*2)} ${B(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM});mt("Modal",e=>{const t=hn(e);return[mn(t),vn(t),It(t),vt(t,"zoom"),gn(t)]},pn,{unitless:{titleLineHeight:!0}});function Rt(){var e=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:t}}function Cn(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var $e=r.createContext(null),wn=function(t){var n=t.visible,o=t.maskTransitionName,a=t.getContainer,i=t.prefixCls,l=t.rootClassName,s=t.icons,c=t.countRender,d=t.showSwitch,v=t.showProgress,u=t.current,p=t.transform,f=t.count,g=t.scale,y=t.minScale,x=t.maxScale,b=t.closeIcon,$=t.onActive,I=t.onClose,R=t.onZoomIn,m=t.onZoomOut,w=t.onRotateRight,h=t.onRotateLeft,C=t.onFlipX,E=t.onFlipY,N=t.onReset,S=t.toolbarRender,P=t.zIndex,O=t.image,T=r.useContext($e),z=s.rotateLeft,H=s.rotateRight,W=s.zoomIn,U=s.zoomOut,oe=s.close,V=s.left,k=s.right,j=s.flipX,J=s.flipY,re="".concat(i,"-operations-operation");r.useEffect(function(){var A=function(Q){Q.keyCode===Re.ESC&&I()};return n&&window.addEventListener("keydown",A),function(){window.removeEventListener("keydown",A)}},[n]);var se=function(K,Q){K.preventDefault(),K.stopPropagation(),$(Q)},F=r.useCallback(function(A){var K=A.type,Q=A.disabled,ie=A.onClick,ne=A.icon;return r.createElement("div",{key:K,className:Y(re,"".concat(i,"-operations-operation-").concat(K),fe({},"".concat(i,"-operations-operation-disabled"),!!Q)),onClick:ie},ne)},[re,i]),le=d?F({icon:V,onClick:function(K){return se(K,-1)},type:"prev",disabled:u===0}):void 0,ee=d?F({icon:k,onClick:function(K){return se(K,1)},type:"next",disabled:u===f-1}):void 0,te=F({icon:J,onClick:E,type:"flipY"}),D=F({icon:j,onClick:C,type:"flipX"}),ce=F({icon:z,onClick:h,type:"rotateLeft"}),q=F({icon:H,onClick:w,type:"rotateRight"}),ae=F({icon:U,onClick:m,type:"zoomOut",disabled:g<=y}),ue=F({icon:W,onClick:R,type:"zoomIn",disabled:g===x}),L=r.createElement("div",{className:"".concat(i,"-operations")},te,D,ce,q,ae,ue);return r.createElement(qe,{visible:n,motionName:o},function(A){var K=A.className,Q=A.style;return r.createElement(ft,{open:!0,getContainer:a??document.body},r.createElement("div",{className:Y("".concat(i,"-operations-wrapper"),K,l),style:M(M({},Q),{},{zIndex:P})},b===null?null:r.createElement("button",{className:"".concat(i,"-close"),onClick:I},b||oe),d&&r.createElement(r.Fragment,null,r.createElement("div",{className:Y("".concat(i,"-switch-left"),fe({},"".concat(i,"-switch-left-disabled"),u===0)),onClick:function(ne){return se(ne,-1)}},V),r.createElement("div",{className:Y("".concat(i,"-switch-right"),fe({},"".concat(i,"-switch-right-disabled"),u===f-1)),onClick:function(ne){return se(ne,1)}},k)),r.createElement("div",{className:"".concat(i,"-footer")},v&&r.createElement("div",{className:"".concat(i,"-progress")},c?c(u+1,f):r.createElement("bdi",null,"".concat(u+1," / ").concat(f))),S?S(L,M(M({icons:{prevIcon:le,nextIcon:ee,flipYIcon:te,flipXIcon:D,rotateLeftIcon:ce,rotateRightIcon:q,zoomOutIcon:ae,zoomInIcon:ue},actions:{onActive:$,onFlipY:E,onFlipX:C,onRotateLeft:h,onRotateRight:w,onZoomOut:m,onZoomIn:R,onReset:N,onClose:I},transform:p},T?{current:u,total:f}:{}),{},{image:O})):L)))})},Oe={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function bn(e,t,n,o){var a=r.useRef(null),i=r.useRef([]),l=r.useState(Oe),s=Z(l,2),c=s[0],d=s[1],v=function(g){d(Oe),Bt(Oe,c)||o==null||o({transform:Oe,action:g})},u=function(g,y){a.current===null&&(i.current=[],a.current=Ht(function(){d(function(x){var b=x;return i.current.forEach(function($){b=M(M({},b),$)}),a.current=null,o==null||o({transform:b,action:y}),b})})),i.current.push(M(M({},c),g))},p=function(g,y,x,b,$){var I=e.current,R=I.width,m=I.height,w=I.offsetWidth,h=I.offsetHeight,C=I.offsetLeft,E=I.offsetTop,N=g,S=c.scale*g;S>n?(S=n,N=n/c.scale):S<t&&(S=$?S:t,N=S/c.scale);var P=x??innerWidth/2,O=b??innerHeight/2,T=N-1,z=T*R*.5,H=T*m*.5,W=T*(P-c.x-C),U=T*(O-c.y-E),oe=c.x-(W-z),V=c.y-(U-H);if(g<1&&S===1){var k=w*S,j=h*S,J=Rt(),re=J.width,se=J.height;k<=re&&j<=se&&(oe=0,V=0)}u({x:oe,y:V,scale:S},y)};return{transform:c,resetTransform:v,updateTransform:u,dispatchZoomChange:p}}function rt(e,t,n,o){var a=t+n,i=(n-o)/2;if(n>o){if(t>0)return fe({},e,i);if(t<0&&a<o)return fe({},e,-i)}else if(t<0||a>o)return fe({},e,t<0?i:-i);return{}}function Mt(e,t,n,o){var a=Rt(),i=a.width,l=a.height,s=null;return e<=i&&t<=l?s={x:0,y:0}:(e>i||t>l)&&(s=M(M({},rt("x",n,e,i)),rt("y",o,t,l))),s}var ye=1,Sn=1;function yn(e,t,n,o,a,i,l){var s=a.rotate,c=a.scale,d=a.x,v=a.y,u=r.useState(!1),p=Z(u,2),f=p[0],g=p[1],y=r.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),x=function(m){!t||m.button!==0||(m.preventDefault(),m.stopPropagation(),y.current={diffX:m.pageX-d,diffY:m.pageY-v,transformX:d,transformY:v},g(!0))},b=function(m){n&&f&&i({x:m.pageX-y.current.diffX,y:m.pageY-y.current.diffY},"move")},$=function(){if(n&&f){g(!1);var m=y.current,w=m.transformX,h=m.transformY,C=d!==w&&v!==h;if(!C)return;var E=e.current.offsetWidth*c,N=e.current.offsetHeight*c,S=e.current.getBoundingClientRect(),P=S.left,O=S.top,T=s%180!==0,z=Mt(T?N:E,T?E:N,P,O);z&&i(M({},z),"dragRebound")}},I=function(m){if(!(!n||m.deltaY==0)){var w=Math.abs(m.deltaY/100),h=Math.min(w,Sn),C=ye+h*o;m.deltaY>0&&(C=ye/C),l(C,"wheel",m.clientX,m.clientY)}};return r.useEffect(function(){var R,m,w,h;if(t){w=Se(window,"mouseup",$,!1),h=Se(window,"mousemove",b,!1);try{window.top!==window.self&&(R=Se(window.top,"mouseup",$,!1),m=Se(window.top,"mousemove",b,!1))}catch{}}return function(){var C,E,N,S;(C=w)===null||C===void 0||C.remove(),(E=h)===null||E===void 0||E.remove(),(N=R)===null||N===void 0||N.remove(),(S=m)===null||S===void 0||S.remove()}},[n,f,d,v,s,t]),{isMoving:f,onMouseDown:x,onMouseMove:b,onMouseUp:$,onWheel:I}}function xn(e){return new Promise(function(t){if(!e){t(!1);return}var n=document.createElement("img");n.onerror=function(){return t(!1)},n.onload=function(){return t(!0)},n.src=e})}function $t(e){var t=e.src,n=e.isCustomPlaceholder,o=e.fallback,a=r.useState(n?"loading":"normal"),i=Z(a,2),l=i[0],s=i[1],c=r.useRef(!1),d=l==="error";r.useEffect(function(){var f=!0;return xn(t).then(function(g){!g&&f&&s("error")}),function(){f=!1}},[t]),r.useEffect(function(){n&&!c.current?s("loading"):d&&s("normal")},[t]);var v=function(){s("normal")},u=function(g){c.current=!1,l==="loading"&&g!==null&&g!==void 0&&g.complete&&(g.naturalWidth||g.naturalHeight)&&(c.current=!0,v())},p=d&&o?{src:o}:{onLoad:v,src:t};return[u,p,l]}function _e(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.hypot(n,o)}function In(e,t,n,o){var a=_e(e,n),i=_e(t,o);if(a===0&&i===0)return[e.x,e.y];var l=a/(a+i),s=e.x+l*(t.x-e.x),c=e.y+l*(t.y-e.y);return[s,c]}function Rn(e,t,n,o,a,i,l){var s=a.rotate,c=a.scale,d=a.x,v=a.y,u=r.useState(!1),p=Z(u,2),f=p[0],g=p[1],y=r.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),x=function(m){y.current=M(M({},y.current),m)},b=function(m){if(t){m.stopPropagation(),g(!0);var w=m.touches,h=w===void 0?[]:w;h.length>1?x({point1:{x:h[0].clientX,y:h[0].clientY},point2:{x:h[1].clientX,y:h[1].clientY},eventType:"touchZoom"}):x({point1:{x:h[0].clientX-d,y:h[0].clientY-v},eventType:"move"})}},$=function(m){var w=m.touches,h=w===void 0?[]:w,C=y.current,E=C.point1,N=C.point2,S=C.eventType;if(h.length>1&&S==="touchZoom"){var P={x:h[0].clientX,y:h[0].clientY},O={x:h[1].clientX,y:h[1].clientY},T=In(E,N,P,O),z=Z(T,2),H=z[0],W=z[1],U=_e(P,O)/_e(E,N);l(U,"touchZoom",H,W,!0),x({point1:P,point2:O,eventType:"touchZoom"})}else S==="move"&&(i({x:h[0].clientX-E.x,y:h[0].clientY-E.y},"move"),x({eventType:"move"}))},I=function(){if(n){if(f&&g(!1),x({eventType:"none"}),o>c)return i({x:0,y:0,scale:o},"touchZoom");var m=e.current.offsetWidth*c,w=e.current.offsetHeight*c,h=e.current.getBoundingClientRect(),C=h.left,E=h.top,N=s%180!==0,S=Mt(N?w:m,N?m:w,C,E);S&&i(M({},S),"dragRebound")}};return r.useEffect(function(){var R;return n&&t&&(R=Se(window,"touchmove",function(m){return m.preventDefault()},{passive:!1})),function(){var m;(m=R)===null||m===void 0||m.remove()}},[n,t]),{isTouching:f,onTouchStart:b,onTouchMove:$,onTouchEnd:I}}var Mn=["fallback","src","imgRef"],$n=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],En=function(t){var n=t.fallback,o=t.src,a=t.imgRef,i=xe(t,Mn),l=$t({src:o,fallback:n}),s=Z(l,2),c=s[0],d=s[1];return X.createElement("img",G({ref:function(u){a.current=u,c(u)}},i,d))},Et=function(t){var n=t.prefixCls,o=t.src,a=t.alt,i=t.imageInfo,l=t.fallback,s=t.movable,c=s===void 0?!0:s,d=t.onClose,v=t.visible,u=t.icons,p=u===void 0?{}:u,f=t.rootClassName,g=t.closeIcon,y=t.getContainer,x=t.current,b=x===void 0?0:x,$=t.count,I=$===void 0?1:$,R=t.countRender,m=t.scaleStep,w=m===void 0?.5:m,h=t.minScale,C=h===void 0?1:h,E=t.maxScale,N=E===void 0?50:E,S=t.transitionName,P=S===void 0?"zoom":S,O=t.maskTransitionName,T=O===void 0?"fade":O,z=t.imageRender,H=t.imgCommonProps,W=t.toolbarRender,U=t.onTransform,oe=t.onChange,V=xe(t,$n),k=r.useRef(),j=r.useContext($e),J=j&&I>1,re=j&&I>=1,se=r.useState(!0),F=Z(se,2),le=F[0],ee=F[1],te=bn(k,C,N,U),D=te.transform,ce=te.resetTransform,q=te.updateTransform,ae=te.dispatchZoomChange,ue=yn(k,c,v,w,D,q,ae),L=ue.isMoving,A=ue.onMouseDown,K=ue.onWheel,Q=Rn(k,c,v,C,D,q,ae),ie=Q.isTouching,ne=Q.onTouchStart,ge=Q.onTouchMove,we=Q.onTouchEnd,me=D.rotate,ve=D.scale,je=Y(fe({},"".concat(n,"-moving"),L));r.useEffect(function(){le||ee(!0)},[le]);var De=function(){ce("close")},Be=function(){ae(ye+w,"zoomIn")},he=function(){ae(ye/(ye+w),"zoomOut")},pe=function(){q({rotate:me+90},"rotateRight")},Ee=function(){q({rotate:me-90},"rotateLeft")},Ne=function(){q({flipX:!D.flipX},"flipX")},Te=function(){q({flipY:!D.flipY},"flipY")},Pt=function(){ce("reset")},He=function(Ce){var Pe=b+Ce;!Number.isInteger(Pe)||Pe<0||Pe>I-1||(ee(!1),ce(Ce<0?"prev":"next"),oe==null||oe(Pe,b))},Ot=function(Ce){!v||!J||(Ce.keyCode===Re.LEFT?He(-1):Ce.keyCode===Re.RIGHT&&He(1))},Lt=function(Ce){v&&(ve!==1?q({x:0,y:0,scale:1},"doubleClick"):ae(ye+w,"doubleClick",Ce.clientX,Ce.clientY))};r.useEffect(function(){var de=Se(window,"keydown",Ot,!1);return function(){de.remove()}},[v,J,b]);var Qe=X.createElement(En,G({},H,{width:t.width,height:t.height,imgRef:k,className:"".concat(n,"-img"),alt:a,style:{transform:"translate3d(".concat(D.x,"px, ").concat(D.y,"px, 0) scale3d(").concat(D.flipX?"-":"").concat(ve,", ").concat(D.flipY?"-":"").concat(ve,", 1) rotate(").concat(me,"deg)"),transitionDuration:(!le||ie)&&"0s"},fallback:l,src:o,onWheel:K,onMouseDown:A,onDoubleClick:Lt,onTouchStart:ne,onTouchMove:ge,onTouchEnd:we,onTouchCancel:we})),Je=M({url:o,alt:a},i);return X.createElement(X.Fragment,null,X.createElement(xt,G({transitionName:P,maskTransitionName:T,closable:!1,keyboard:!0,prefixCls:n,onClose:d,visible:v,classNames:{wrapper:je},rootClassName:f,getContainer:y},V,{afterClose:De}),X.createElement("div",{className:"".concat(n,"-img-wrapper")},z?z(Qe,M({transform:D,image:Je},j?{current:b}:{})):Qe)),X.createElement(wn,{visible:v,transform:D,maskTransitionName:T,closeIcon:g,getContainer:y,prefixCls:n,rootClassName:f,icons:p,countRender:R,showSwitch:J,showProgress:re,current:b,count:I,scale:ve,minScale:C,maxScale:N,toolbarRender:W,onActive:He,onZoomIn:Be,onZoomOut:he,onRotateRight:pe,onRotateLeft:Ee,onFlipX:Ne,onFlipY:Te,onClose:d,onReset:Pt,zIndex:V.zIndex!==void 0?V.zIndex+1:void 0,image:Je}))},Ze=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Nn(e){var t=r.useState({}),n=Z(t,2),o=n[0],a=n[1],i=r.useCallback(function(s,c){return a(function(d){return M(M({},d),{},fe({},s,c))}),function(){a(function(d){var v=M({},d);return delete v[s],v})}},[]),l=r.useMemo(function(){return e?e.map(function(s){if(typeof s=="string")return{data:{src:s}};var c={};return Object.keys(s).forEach(function(d){["src"].concat(gt(Ze)).includes(d)&&(c[d]=s[d])}),{data:c}}):Object.keys(o).reduce(function(s,c){var d=o[c],v=d.canPreview,u=d.data;return v&&s.push({data:u,id:c}),s},[])},[e,o]);return[l,i,!!e]}var Tn=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Pn=["src"],On=function(t){var n,o=t.previewPrefixCls,a=o===void 0?"rc-image-preview":o,i=t.children,l=t.icons,s=l===void 0?{}:l,c=t.items,d=t.preview,v=t.fallback,u=ze(d)==="object"?d:{},p=u.visible,f=u.onVisibleChange,g=u.getContainer,y=u.current,x=u.movable,b=u.minScale,$=u.maxScale,I=u.countRender,R=u.closeIcon,m=u.onChange,w=u.onTransform,h=u.toolbarRender,C=u.imageRender,E=xe(u,Tn),N=Nn(c),S=Z(N,3),P=S[0],O=S[1],T=S[2],z=We(0,{value:y}),H=Z(z,2),W=H[0],U=H[1],oe=r.useState(!1),V=Z(oe,2),k=V[0],j=V[1],J=((n=P[W])===null||n===void 0?void 0:n.data)||{},re=J.src,se=xe(J,Pn),F=We(!!p,{value:p,onChange:function(ie,ne){f==null||f(ie,ne,W)}}),le=Z(F,2),ee=le[0],te=le[1],D=r.useState(null),ce=Z(D,2),q=ce[0],ae=ce[1],ue=r.useCallback(function(Q,ie,ne,ge){var we=T?P.findIndex(function(me){return me.data.src===ie}):P.findIndex(function(me){return me.id===Q});U(we<0?0:we),te(!0),ae({x:ne,y:ge}),j(!0)},[P,T]);r.useEffect(function(){ee?k||U(0):j(!1)},[ee]);var L=function(ie,ne){U(ie),m==null||m(ie,ne)},A=function(){te(!1),ae(null)},K=r.useMemo(function(){return{register:O,onPreview:ue}},[O,ue]);return r.createElement($e.Provider,{value:K},i,r.createElement(Et,G({"aria-hidden":!ee,movable:x,visible:ee,prefixCls:a,closeIcon:R,onClose:A,mousePosition:q,imgCommonProps:se,src:re,fallback:v,icons:s,minScale:b,maxScale:$,getContainer:g,current:W,count:P.length,countRender:I,onTransform:w,toolbarRender:h,imageRender:C,onChange:L},E)))},at=0;function Ln(e,t){var n=r.useState(function(){return at+=1,String(at)}),o=Z(n,1),a=o[0],i=r.useContext($e),l={data:t,canPreview:e};return r.useEffect(function(){if(i)return i.register(a,l)},[]),r.useEffect(function(){i&&i.register(a,l)},[e,t]),a}var zn=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],An=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],Ke=function(t){var n=t.src,o=t.alt,a=t.onPreviewClose,i=t.prefixCls,l=i===void 0?"rc-image":i,s=t.previewPrefixCls,c=s===void 0?"".concat(l,"-preview"):s,d=t.placeholder,v=t.fallback,u=t.width,p=t.height,f=t.style,g=t.preview,y=g===void 0?!0:g,x=t.className,b=t.onClick,$=t.onError,I=t.wrapperClassName,R=t.wrapperStyle,m=t.rootClassName,w=xe(t,zn),h=d&&d!==!0,C=ze(y)==="object"?y:{},E=C.src,N=C.visible,S=N===void 0?void 0:N,P=C.onVisibleChange,O=P===void 0?a:P,T=C.getContainer,z=T===void 0?void 0:T,H=C.mask,W=C.maskClassName,U=C.movable,oe=C.icons,V=C.scaleStep,k=C.minScale,j=C.maxScale,J=C.imageRender,re=C.toolbarRender,se=xe(C,An),F=E??n,le=We(!!S,{value:S,onChange:O}),ee=Z(le,2),te=ee[0],D=ee[1],ce=$t({src:n,isCustomPlaceholder:h,fallback:v}),q=Z(ce,3),ae=q[0],ue=q[1],L=q[2],A=r.useState(null),K=Z(A,2),Q=K[0],ie=K[1],ne=r.useContext($e),ge=!!y,we=function(){D(!1),ie(null)},me=Y(l,I,m,fe({},"".concat(l,"-error"),L==="error")),ve=r.useMemo(function(){var he={};return Ze.forEach(function(pe){t[pe]!==void 0&&(he[pe]=t[pe])}),he},Ze.map(function(he){return t[he]})),je=r.useMemo(function(){return M(M({},ve),{},{src:F})},[F,ve]),De=Ln(ge,je),Be=function(pe){var Ee=Cn(pe.target),Ne=Ee.left,Te=Ee.top;ne?ne.onPreview(De,F,Ne,Te):(ie({x:Ne,y:Te}),D(!0)),b==null||b(pe)};return r.createElement(r.Fragment,null,r.createElement("div",G({},w,{className:me,onClick:ge?Be:b,style:M({width:u,height:p},R)}),r.createElement("img",G({},ve,{className:Y("".concat(l,"-img"),fe({},"".concat(l,"-img-placeholder"),d===!0),x),style:M({height:p},f),ref:ae},ue,{width:u,height:p,onError:$})),L==="loading"&&r.createElement("div",{"aria-hidden":"true",className:"".concat(l,"-placeholder")},d),H&&ge&&r.createElement("div",{className:Y("".concat(l,"-mask"),W),style:{display:(f==null?void 0:f.display)==="none"?"none":void 0}},H)),!ne&&ge&&r.createElement(Et,G({"aria-hidden":!te,visible:te,prefixCls:c,onClose:we,mousePosition:Q,src:F,alt:o,imageInfo:{width:u,height:p},fallback:v,getContainer:z,icons:oe,movable:U,scaleStep:V,minScale:k,maxScale:j,rootClassName:m,imageRender:J,imgCommonProps:ve,toolbarRender:re},se)))};Ke.PreviewGroup=On;var _n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},jn=function(t,n){return r.createElement(Me,G({},t,{ref:n,icon:_n}))},Dn=r.forwardRef(jn),Bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},Hn=function(t,n){return r.createElement(Me,G({},t,{ref:n,icon:Bn}))},Xn=r.forwardRef(Hn),Yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},Wn=function(t,n){return r.createElement(Me,G({},t,{ref:n,icon:Yn}))},it=r.forwardRef(Wn),Vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},Fn=function(t,n){return r.createElement(Me,G({},t,{ref:n,icon:Vn}))},Zn=r.forwardRef(Fn),Gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},Un=function(t,n){return r.createElement(Me,G({},t,{ref:n,icon:Gn}))},kn=r.forwardRef(Un);const Ge=e=>({position:e||"absolute",inset:0}),qn=e=>{const{iconCls:t,motionDurationSlow:n,paddingXXS:o,marginXXS:a,prefixCls:i,colorTextLightSolid:l}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:l,background:new be("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${i}-mask-info`]:Object.assign(Object.assign({},Xt),{padding:`0 ${B(o)}`,[t]:{marginInlineEnd:a,svg:{verticalAlign:"baseline"}}})}},Kn=e=>{const{previewCls:t,modalMaskBg:n,paddingSM:o,marginXL:a,margin:i,paddingLG:l,previewOperationColorDisabled:s,previewOperationHoverColor:c,motionDurationSlow:d,iconCls:v,colorTextLightSolid:u}=e,p=new be(n).setA(.1),f=p.clone().setA(.2);return{[`${t}-footer`]:{position:"fixed",bottom:a,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:i},[`${t}-close`]:{position:"fixed",top:a,right:{_skip_check_:!0,value:a},display:"flex",color:u,backgroundColor:p.toRgbString(),borderRadius:"50%",padding:o,outline:0,border:0,cursor:"pointer",transition:`all ${d}`,"&:hover":{backgroundColor:f.toRgbString()},[`& > ${v}`]:{fontSize:e.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${B(l)}`,backgroundColor:p.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:o,padding:o,cursor:"pointer",transition:`all ${d}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${v}`]:{color:c},"&-disabled":{color:s,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${v}`]:{fontSize:e.previewOperationSize}}}}},Qn=e=>{const{modalMaskBg:t,iconCls:n,previewOperationColorDisabled:o,previewCls:a,zIndexPopup:i,motionDurationSlow:l}=e,s=new be(t).setA(.1),c=s.clone().setA(.2);return{[`${a}-switch-left, ${a}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(i).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:s.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${l}`,userSelect:"none","&:hover":{background:c.toRgbString()},"&-disabled":{"&, &:hover":{color:o,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:e.previewOperationSize}},[`${a}-switch-left`]:{insetInlineStart:e.marginSM},[`${a}-switch-right`]:{insetInlineEnd:e.marginSM}}},Jn=e=>{const{motionEaseOut:t,previewCls:n,motionDurationSlow:o,componentCls:a}=e;return[{[`${a}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},Ge()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Ge()),{transition:`transform ${o} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${a}-preview-root`]:{[`${n}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${a}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[Kn(e),Qn(e)]}]},eo=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},qn(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},Ge())}}},to=e=>{const{previewCls:t}=e;return{[`${t}-root`]:vt(e,"zoom"),"&":bt(e,!0)}},no=e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new be(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new be(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new be(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5}),Nt=mt("Image",e=>{const t=`${e.componentCls}-preview`,n=Ye(e,{previewCls:t,modalMaskBg:new be("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[eo(n),Jn(n),It(Ye(n,{componentCls:t})),to(n)]},no);var oo=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Tt={rotateLeft:r.createElement(Dn,null),rotateRight:r.createElement(Xn,null),zoomIn:r.createElement(Zn,null),zoomOut:r.createElement(kn,null),close:r.createElement(Yt,null),left:r.createElement(Fe,null),right:r.createElement(Ve,null),flipX:r.createElement(it,null),flipY:r.createElement(it,{rotate:90})},ro=e=>{var{previewPrefixCls:t,preview:n}=e,o=oo(e,["previewPrefixCls","preview"]);const{getPrefixCls:a,direction:i}=r.useContext(Wt),l=a("image",t),s=`${l}-preview`,c=a(),d=ht(l),[v,u,p]=Nt(l,d),[f]=pt("ImagePreview",typeof n=="object"?n.zIndex:void 0),g=r.useMemo(()=>Object.assign(Object.assign({},Tt),{left:i==="rtl"?r.createElement(Ve,null):r.createElement(Fe,null),right:i==="rtl"?r.createElement(Fe,null):r.createElement(Ve,null)}),[i]),y=r.useMemo(()=>{var x;if(n===!1)return n;const b=typeof n=="object"?n:{},$=Y(u,p,d,(x=b.rootClassName)!==null&&x!==void 0?x:"");return Object.assign(Object.assign({},b),{transitionName:Ae(c,"zoom",b.transitionName),maskTransitionName:Ae(c,"fade",b.maskTransitionName),rootClassName:$,zIndex:f})},[n]);return v(r.createElement(Ke.PreviewGroup,Object.assign({preview:y,previewPrefixCls:s,icons:g},o)))};var st=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]]);return n};const Ue=e=>{const{prefixCls:t,preview:n,className:o,rootClassName:a,style:i}=e,l=st(e,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:s,getPopupContainer:c,className:d,style:v,preview:u}=Vt("image"),[p]=Ft("Image"),f=s("image",t),g=s(),y=ht(f),[x,b,$]=Nt(f,y),I=Y(a,b,$,y),R=Y(o,b,d),[m]=pt("ImagePreview",typeof n=="object"?n.zIndex:void 0),w=r.useMemo(()=>{if(n===!1)return n;const C=typeof n=="object"?n:{},{getContainer:E,closeIcon:N,rootClassName:S,destroyOnClose:P,destroyOnHidden:O}=C,T=st(C,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:r.createElement("div",{className:`${f}-mask-info`},r.createElement(Gt,null),p==null?void 0:p.preview),icons:Tt},T),{destroyOnClose:O??P,rootClassName:Y(I,S),getContainer:E??c,transitionName:Ae(g,"zoom",C.transitionName),maskTransitionName:Ae(g,"fade",C.maskTransitionName),zIndex:m,closeIcon:N??(u==null?void 0:u.closeIcon)})},[n,p,u==null?void 0:u.closeIcon]),h=Object.assign(Object.assign({},v),i);return x(r.createElement(Ke,Object.assign({prefixCls:f,preview:w,rootClassName:I,className:R,style:h},l)))};Ue.PreviewGroup=ro;var ke=new Map,Le=new WeakMap,lt=0,ao=void 0;function io(e){return e?(Le.has(e)||(lt+=1,Le.set(e,lt.toString())),Le.get(e)):"0"}function so(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?io(e.root):e[t]}`).toString()}function lo(e){const t=so(e);let n=ke.get(t);if(!n){const o=new Map;let a;const i=new IntersectionObserver(l=>{l.forEach(s=>{var c;const d=s.isIntersecting&&a.some(v=>s.intersectionRatio>=v);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=d),(c=o.get(s.target))==null||c.forEach(v=>{v(d,s)})})},e);a=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:o},ke.set(t,n)}return n}function co(e,t,n={},o=ao){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const c=e.getBoundingClientRect();return t(o,{isIntersecting:o,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:a,observer:i,elements:l}=lo(n),s=l.get(e)||[];return l.has(e)||l.set(e,s),s.push(t),i.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(l.delete(e),i.unobserve(e)),l.size===0&&(i.disconnect(),ke.delete(a))}}function uo({threshold:e,delay:t,trackVisibility:n,rootMargin:o,root:a,triggerOnce:i,skip:l,initialInView:s,fallbackInView:c,onChange:d}={}){var v;const[u,p]=r.useState(null),f=r.useRef(d),[g,y]=r.useState({inView:!!s,entry:void 0});f.current=d,r.useEffect(()=>{if(l||!u)return;let I;return I=co(u,(R,m)=>{y({inView:R,entry:m}),f.current&&f.current(R,m),m.isIntersecting&&i&&I&&(I(),I=void 0)},{root:a,rootMargin:o,threshold:e,trackVisibility:n,delay:t},c),()=>{I&&I()}},[Array.isArray(e)?e.toString():e,u,a,o,i,l,n,c,t]);const x=(v=g.entry)==null?void 0:v.target,b=r.useRef(void 0);!u&&x&&!i&&!l&&b.current!==x&&(b.current=x,y({inView:!!s,entry:void 0}));const $=[p,g.inView,g.entry];return $.ref=$[0],$.inView=$[1],$.entry=$[2],$}const Ie=Zt((e,t)=>({albums:[],total:0,isLoading:!1,error:null,hasMore:!0,fetchMoreAlbums:async({page:n,limit:o,searchValue:a})=>{const{albums:i,hasMore:l,isLoading:s}=t();if(!(s||!l)){e({isLoading:!0,error:null});try{const c=new URLSearchParams({_page:String(n),_limit:String(o)});a&&c.append("q",a);const[d,v]=await Promise.all([Xe.get(`/albums?${c.toString()}`),Xe.get("/users")]),u=v.data,p=d.data.map(g=>({...g,author:u.find(y=>y.id===g.userId)})),f=await Promise.all(p.map(async g=>{const x=(await Xe.get(`/albums/${g.id}/photos?_limit=6`)).data;return{...g,photos:x}}));e({albums:[...i,...f],hasMore:p.length>0,isLoading:!1,error:null})}catch{e({error:"Ошибка загрузки альбомов",isLoading:!1})}}}})),{Title:ct,Text:fo}=Ct,mo=r.memo(({album:e})=>{var t,n,o,a,i;return _.jsx(Jt,{title:_.jsxs(_.Fragment,{children:[_.jsx(ct,{level:3,children:e.title}),_.jsxs(wt,{gap:10,children:[_.jsx(nn,{children:(t=e.author)==null?void 0:t.name[0]}),_.jsxs("div",{children:[_.jsxs(ct,{level:5,style:{marginBottom:0},children:[(n=e.author)==null?void 0:n.name," (",(o=e.author)==null?void 0:o.username,")"]}),_.jsx(fo,{type:"secondary",children:"Почта: "}),_.jsx("a",{href:`mailto:${(a=e.author)==null?void 0:a.email}`,target:"_blank",children:(i=e.author)==null?void 0:i.email})]})]})]}),hoverable:!0,children:_.jsx(Ue.PreviewGroup,{children:e.photos.map(l=>_.jsx(Ue,{src:l.thumbnailUrl.replace("via.placeholder.com","dummyimage.com"),width:60,height:60,alt:l.title},l.id))})})}),vo=({albums:e})=>_.jsx(en,{gutter:[16,16],children:e.map(t=>_.jsx(tn,{sm:24,md:12,lg:8,children:_.jsx(mo,{album:t})},t.id))}),{Title:go,Text:ho}=Ct,Io=()=>{const e=Ie(f=>f.albums),t=Ie(f=>f.isLoading),n=Ie(f=>f.error),o=Ie(f=>f.hasMore),a=Ie(f=>f.fetchMoreAlbums),{ref:i,inView:l}=uo(),[s,c]=r.useState(""),[d,v]=r.useState(1),u=kt(s,1e3),p=f=>{c(f.target.value),v(1)};return r.useEffect(()=>{l&&o&&!t&&!n&&(a({limit:5,page:d,searchValue:u}),v(f=>f+1))},[l,o,t,u,n]),_.jsxs(wt,{vertical:!0,gap:16,children:[_.jsx(go,{level:2,style:{marginBottom:0},children:"Альбомы"}),_.jsx(Ut,{value:s,onChange:p,placeholder:"Поиск по тексту"}),n&&_.jsx(qt,{type:"error",message:n}),_.jsx(vo,{albums:e}),_.jsxs("div",{ref:i,style:{textAlign:"center",padding:24},children:[t&&_.jsx(Kt,{}),!o&&_.jsx(ho,{strong:!0,children:"Все альбомы загружены"})]})]})};export{Io as Component};
